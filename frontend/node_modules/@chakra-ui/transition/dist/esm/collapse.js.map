{"version":3,"sources":["../../src/collapse.tsx"],"names":["cx","warn","__DEV__","AnimatePresence","motion","React","EASINGS","variants","exit","props","animateOpacity","opacity","parseInt","startingHeight","height","transition","duration","ease","easeInOut","enter","endingHeight","Collapse","forwardRef","ref","in","isOpen","unmountOnExit","style","className","onAnimationComplete","rest","ariaHidden","setAriaHidden","useState","shouldExpand","custom","undefined","c","overflow","displayName"],"mappings":"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","sourcesContent":["import { cx, warn, __DEV__ } from \"@chakra-ui/utils\"\nimport { AnimatePresence, HTMLMotionProps, motion } from \"framer-motion\"\nimport * as React from \"react\"\nimport { EASINGS, MotionVariants } from \"./__utils\"\n\ntype CollapseVariants = MotionVariants<\"enter\" | \"exit\">\n\nconst variants: CollapseVariants = {\n  exit: (props: CollapseOptions) => ({\n    ...(props.animateOpacity && {\n      opacity: parseInt(props.startingHeight as string, 10) > 0 ? 1 : 0,\n    }),\n    height: props.startingHeight,\n    transition: { duration: 0.2, ease: EASINGS.easeInOut },\n  }),\n  enter: (props: CollapseOptions) => ({\n    ...(props.animateOpacity && {\n      opacity: 1,\n    }),\n    height: props.endingHeight,\n    transition: {\n      duration: 0.3,\n      ease: EASINGS.easeInOut,\n    },\n  }),\n}\n\nexport interface CollapseOptions {\n  /**\n   * If `true`, the opacity of the content will be animated\n   */\n  animateOpacity?: boolean\n  /**\n   * If `true`, the collapse will unmount when `in={false}` and animation is done\n   */\n  unmountOnExit?: boolean\n  /**\n   * If `true`, the content will be expanded\n   */\n  in?: boolean\n  /**\n   * The height you want the content in it's collapsed state. Set to `0` by default\n   */\n  startingHeight?: number | string\n  /**\n   * The height you want the content in it's expanded state. Set to `auto` by default\n   */\n  endingHeight?: number | string\n}\n\nexport type ICollapse = CollapseProps\n\nexport interface CollapseProps\n  extends HTMLMotionProps<\"div\">,\n    CollapseOptions {}\n\nexport const Collapse = React.forwardRef<HTMLDivElement, CollapseProps>(\n  function Collapse(props, ref) {\n    const {\n      in: isOpen,\n      unmountOnExit,\n      animateOpacity = true,\n      startingHeight = 0,\n      endingHeight = \"auto\",\n      style,\n      className,\n      onAnimationComplete,\n      ...rest\n    } = props\n\n    const [ariaHidden, setAriaHidden] = React.useState(() => {\n      // If it's open by default, no need to apply `aria-hidden`\n      if (isOpen) return false\n      // If startingHeight > 0, then content is partially visible\n      if (parseInt(props.startingHeight as string, 10) > 0) return false\n      // Else, the content is hidden\n      return true\n    })\n\n    /**\n     * Warn ðŸš¨: `startingHeight` and `unmountOnExit` are mutually exclusive\n     *\n     * If you specify a starting height, the collapsed needs to be mounted\n     * for the height to take effect.\n     */\n    if (startingHeight > 0 && unmountOnExit) {\n      warn(\n        `startingHeight and unmountOnExit are mutually exclusive. You can't use them together`,\n      )\n    }\n\n    const shouldExpand = unmountOnExit ? isOpen && unmountOnExit : true\n\n    const custom = { startingHeight, endingHeight, animateOpacity }\n\n    return (\n      <AnimatePresence initial={false} custom={custom}>\n        {shouldExpand && (\n          <motion.div\n            ref={ref}\n            aria-hidden={ariaHidden ? \"true\" : undefined}\n            onAnimationComplete={() => {\n              setAriaHidden((c) => !c)\n              onAnimationComplete?.()\n            }}\n            className={cx(\"chakra-collapse\", className)}\n            initial=\"exit\"\n            animate={isOpen || unmountOnExit ? \"enter\" : \"exit\"}\n            exit=\"exit\"\n            {...rest}\n            variants={variants}\n            style={{ overflow: \"hidden\", ...style }}\n            custom={custom}\n          />\n        )}\n      </AnimatePresence>\n    )\n  },\n)\n\nif (__DEV__) {\n  Collapse.displayName = \"Collapse\"\n}\n"],"file":"collapse.js"}