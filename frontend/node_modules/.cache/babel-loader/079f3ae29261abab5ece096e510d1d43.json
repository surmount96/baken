{"ast":null,"code":"import * as React from \"react\";\nimport ReactFocusLock from \"react-focus-lock\";\nimport { __DEV__, getAllFocusable, focus } from \"@chakra-ui/utils\";\n/**\n * React component to trap focus within an element or component.\n * Mostly used in Modals, Popovers, etc.\n *\n * @see Docs https://chakra-ui.com/components/focuslock\n */\n\nexport var FocusLock = props => {\n  var {\n    initialFocusRef,\n    finalFocusRef,\n    contentRef,\n    restoreFocus,\n    children,\n    isDisabled,\n    autoFocus,\n    persistentFocus\n  } = props;\n  var onActivation = React.useCallback(() => {\n    if (initialFocusRef == null ? void 0 : initialFocusRef.current) {\n      initialFocusRef.current.focus();\n    } else if (contentRef == null ? void 0 : contentRef.current) {\n      var focusables = getAllFocusable(contentRef.current);\n\n      if (focusables.length === 0) {\n        focus(contentRef.current);\n      }\n    }\n  }, [initialFocusRef, contentRef]);\n  var onDeactivation = React.useCallback(() => {\n    var _finalFocusRef$curren;\n\n    finalFocusRef == null ? void 0 : (_finalFocusRef$curren = finalFocusRef.current) == null ? void 0 : _finalFocusRef$curren.focus();\n  }, [finalFocusRef]);\n  var returnFocus = restoreFocus && !finalFocusRef;\n  return /*#__PURE__*/React.createElement(ReactFocusLock, {\n    persistentFocus: persistentFocus,\n    autoFocus: autoFocus,\n    disabled: isDisabled,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }, children);\n};\n\nif (__DEV__) {\n  FocusLock.displayName = \"FocusLock\";\n}\n\nexport default FocusLock;","map":{"version":3,"sources":["../../src/index.tsx"],"names":["FocusLock","props","persistentFocus","onActivation","initialFocusRef","contentRef","focusables","getAllFocusable","focus","onDeactivation","finalFocusRef","returnFocus","restoreFocus"],"mappings":"AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;AACA,OAAA,cAAA,MAAA,kBAAA;AACA,SAAA,OAAA,EAAA,eAAA,EAAA,KAAA,QAAA,kBAAA;AA8CA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAMA,SAAmC,GAAIC,KAAD,IAAW;AAC5D,MAAM;AAAA,IAAA,eAAA;AAAA,IAAA,aAAA;AAAA,IAAA,UAAA;AAAA,IAAA,YAAA;AAAA,IAAA,QAAA;AAAA,IAAA,UAAA;AAAA,IAAA,SAAA;AAQJC,IAAAA;AARI,MAAN,KAAA;AAWA,MAAMC,YAAY,GAAG,KAAK,CAAL,WAAA,CAAkB,MAAM;AAC3C,QAAIC,eAAJ,IAAA,IAAIA,GAAJ,KAAA,CAAIA,GAAAA,eAAe,CAAnB,OAAA,EAA8B;AAC5BA,MAAAA,eAAe,CAAfA,OAAAA,CAAAA,KAAAA;AADF,KAAA,MAEO,IAAIC,UAAJ,IAAA,IAAIA,GAAJ,KAAA,CAAIA,GAAAA,UAAU,CAAd,OAAA,EAAyB;AAC9B,UAAMC,UAAU,GAAGC,eAAe,CAACF,UAAU,CAA7C,OAAkC,CAAlC;;AACA,UAAIC,UAAU,CAAVA,MAAAA,KAAJ,CAAA,EAA6B;AAC3BE,QAAAA,KAAK,CAACH,UAAU,CAAhBG,OAAK,CAALA;AACD;AACF;AARkB,GAAA,EASlB,CAAA,eAAA,EATH,UASG,CATkB,CAArB;AAWA,MAAMC,cAAc,GAAG,KAAK,CAAL,WAAA,CAAkB,MAAM;AAAA,QAAA,qBAAA;;AAC7CC,IAAAA,aAAa,IAAbA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAAA,GAAAA,aAAa,CAAbA,OAAAA,KAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAAA,CAAAA,KAAAA,EAAAA;AADqB,GAAA,EAEpB,CAFH,aAEG,CAFoB,CAAvB;AAIA,MAAMC,WAAW,GAAGC,YAAY,IAAI,CAApC,aAAA;AAEA,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA;AACE,IAAA,eAAe,EADjB,eAAA;AAEE,IAAA,SAAS,EAFX,SAAA;AAGE,IAAA,QAAQ,EAHV,UAAA;AAIE,IAAA,YAAY,EAJd,YAAA;AAKE,IAAA,cAAc,EALhB,cAAA;AAME,IAAA,WAAW,EAAED;AANf,GAAA,EADF,QACE,CADF;AA7BK,CAAA;;AA2CP,IAAA,OAAA,EAAa;AACXX,EAAAA,SAAS,CAATA,WAAAA,GAAAA,WAAAA;AACD;;AAED,eAAA,SAAA","sourcesContent":["import * as React from \"react\"\nimport ReactFocusLock from \"react-focus-lock\"\nimport {\n  __DEV__,\n  getAllFocusable,\n  focus,\n  FocusableElement,\n} from \"@chakra-ui/utils\"\n\nexport interface FocusLockProps {\n  /**\n   * `ref` of the element to receive focus initially\n   */\n  initialFocusRef?: React.RefObject<FocusableElement>\n  /**\n   * `ref` of the element to return focus to when `FocusLock`\n   * unmounts\n   */\n  finalFocusRef?: React.RefObject<FocusableElement>\n  /**\n   * The `ref` of the wrapper for which the focus-lock wraps\n   */\n  contentRef?: React.RefObject<HTMLElement>\n  /**\n   * If `true`, focus will be restored to the element that\n   * triggered the `FocusLock` once it unmounts\n   */\n  restoreFocus?: boolean\n  /**\n   * The component to render\n   */\n  children: React.ReactNode\n  /**\n   * If `true`, focus trapping will be disabled\n   */\n  isDisabled?: boolean\n  /**\n   * If `true`, the first focuable element within the `children`\n   * will ne auto-focused once `FocusLock` mounts\n   */\n  autoFocus?: boolean\n  /**\n   * If `true`, disables text selections inside, and outside focus lock.\n   * @default `false`\n   */\n  persistentFocus?: boolean\n}\n\n/**\n * React component to trap focus within an element or component.\n * Mostly used in Modals, Popovers, etc.\n *\n * @see Docs https://chakra-ui.com/components/focuslock\n */\nexport const FocusLock: React.FC<FocusLockProps> = (props) => {\n  const {\n    initialFocusRef,\n    finalFocusRef,\n    contentRef,\n    restoreFocus,\n    children,\n    isDisabled,\n    autoFocus,\n    persistentFocus,\n  } = props\n\n  const onActivation = React.useCallback(() => {\n    if (initialFocusRef?.current) {\n      initialFocusRef.current.focus()\n    } else if (contentRef?.current) {\n      const focusables = getAllFocusable(contentRef.current)\n      if (focusables.length === 0) {\n        focus(contentRef.current)\n      }\n    }\n  }, [initialFocusRef, contentRef])\n\n  const onDeactivation = React.useCallback(() => {\n    finalFocusRef?.current?.focus()\n  }, [finalFocusRef])\n\n  const returnFocus = restoreFocus && !finalFocusRef\n\n  return (\n    <ReactFocusLock\n      persistentFocus={persistentFocus}\n      autoFocus={autoFocus}\n      disabled={isDisabled}\n      onActivation={onActivation}\n      onDeactivation={onDeactivation}\n      returnFocus={returnFocus}\n    >\n      {children}\n    </ReactFocusLock>\n  )\n}\n\nif (__DEV__) {\n  FocusLock.displayName = \"FocusLock\"\n}\n\nexport default FocusLock\n"]},"metadata":{},"sourceType":"module"}